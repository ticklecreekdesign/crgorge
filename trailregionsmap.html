e<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Columbia River Gorge — Regions Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts & Leaflet -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>


<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    font-family: 'Montserrat', sans-serif;
  }

  #map {
    width: 100%;
    height: 100%;
  }

  /* Legend styling — border removed */
  #legend {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #fff;
    padding: 10px 12px;
    margin: 0;
    border: none;             /* ⬅️ removed border */
    border-radius: 0;         /* ⬅️ squared corners */
    box-shadow: 0 1px 2px rgba(0,0,0,0.1); /* optional subtle depth */
    font-size: 14px;
    line-height: 1.4;
    color: #333;
  }

  #legend h3 {
    margin: 0 0 6px 0;
    padding: 0;
    font-size: 15px;
    font-weight: 600;
    color: #333;
    border-bottom: 1px solid #ddd;  /* keep subtle line under title */
  }
</style>


  
</head>
<body>
  <div id="map"></div>
  <div class="map-title">Columbia River Gorge — Region Bands</div>
  <div class="legend" id="legend"></div>

  <script>
    // ✅ Dynamically size the map to its parent height (fix for Hostinger)
    function resizeMapToParent() {
      const parent = document.body.parentElement || document.documentElement;
      const h = parent.clientHeight || window.innerHeight;
      document.body.style.height = h + 'px';
      document.getElementById('map').style.height = h + 'px';
    }
    window.addEventListener('load', resizeMapToParent);
    window.addEventListener('resize', resizeMapToParent);

    const map = L.map('map', {
      scrollWheelZoom: true,
      zoomControl: false
    }).setView([45.68, -121.9], 11.8);

    L.control.zoom({ position: 'bottomright' }).addTo(map);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    function bandPolygon(lngMin, lngMax, latMin = 45.48, latMax = 45.77) {
      return [
        [latMin, lngMin],
        [latMin, lngMax],
        [latMax, lngMax],
        [latMax, lngMin]
      ];
    }

    const regions = [
      {name:'West', color:'#3b82f6', exits:'Up to Exit 28', area:'Portland metro → Bridal Veil',
       lngMin:-122.50, lngMax:-122.18, markers:['Troutdale','Corbett','Crown Point']},
      {name:'Central West', color:'#22c55e', exits:'Exit 28–40/44', area:'Bridal Veil → Bonneville/Cascade Locks',
       lngMin:-122.18, lngMax:-121.94, markers:['Multnomah Falls','Wahkeena Falls','Horsetail Falls','Oneonta Gorge']},
      {name:'Central', color:'#f59e0b', exits:'Exit 40–44', area:'Cascade Locks / Bonneville Dam',
       lngMin:-121.94, lngMax:-121.83, markers:['Bridge of the Gods','Eagle Creek','Cascade Locks','Stevenson (WA)']},
      {name:'Central East', color:'#ef4444', exits:'Exit 44–69', area:'Cascade Locks → Mosier',
       lngMin:-121.83, lngMax:-121.45, markers:['Hood River','Starvation Creek','Mosier Twin Tunnels']},
      {name:'East', color:'#a855f7', exits:'Exit 69+', area:'Mosier → The Dalles / Lyle (WA)',
       lngMin:-121.45, lngMax:-121.1, markers:['Rowena Crest','Tom McCall Point','The Dalles','Lyle (WA)']}
    ];

    const group = L.layerGroup().addTo(map);

    regions.forEach(r => {
      const poly = L.polygon(bandPolygon(r.lngMin, r.lngMax), {
        color: r.color,
        weight: 2,
        fillColor: r.color,
        fillOpacity: 0.18
      })
      .on('mouseover', () => poly.setStyle({ fillOpacity: 0.3, weight: 3 }))
      .on('mouseout', () => poly.setStyle({ fillOpacity: 0.18, weight: 2 }))
      .bindPopup(`
        <div class="popup">
          <h4>${r.name}</h4>
          <div class="small"><strong>Area:</strong> ${r.area}</div>
          <div class="small"><strong>Exits:</strong> ${r.exits}</div>
          <div class="chips">${r.markers.map(m => `<span class="chip">${m}</span>`).join('')}</div>
        </div>
      `);
      poly.addTo(group);
    });

    const bounds = L.latLngBounds([[45.48, -122.5], [45.78, -121.1]]);
    map.setMaxBounds(bounds.pad(0.02));

    const legend = document.getElementById('legend');
    legend.innerHTML = `
      <h3>Region Guide</h3>
      ${regions.map(r => `
        <div class="row">
          <div class="swatch" style="background:${r.color}20;border-color:${r.color}55"></div>
          <div>
            <div class="name">${r.name}</div>
            <div class="meta"><strong>Area:</strong> ${r.area}</div>
            <div class="meta"><strong>Exits:</strong> ${r.exits}</div>
            <div class="chips">${r.markers.map(m => `<span class="chip">${m}</span>`).join('')}</div>
          </div>
        </div>
      `).join('')}
    `;
  </script>
</body>
</html>
